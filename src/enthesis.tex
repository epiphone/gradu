\documentclass[utf8,english]{gradu3}
% If you are writing a Bachelor's Thesis, use the following instead:
%\documentclass[utf8,bachelor,english]{gradu3}

\usepackage{graphicx} % for including pictures

\usepackage{amsmath} % useful for math (optional)

\usepackage{booktabs} % good for beautiful tables

% NOTE: This must be the last \usepackage in the whole document!
\usepackage[bookmarksopen,bookmarksnumbered,linktocpage]{hyperref}

\addbibresource{bibliography.bib} % The file name of your bibliography database

\begin{document}

\title{Migrating a web application to serverless architecture}
\translatedtitle{Web-sovelluksen siirtäminen serverless-arkkitehtuuriin}
\studyline{Master's Thesis in Information Technology}
\avainsanat{%
  serverless,
  FaaS,
  arkkitehtuuri,
  pilvilaskenta,
  web-sovellukset}
\keywords{
  serverless,
  FaaS,
  architecture,
  cloud computing,
  web applications}
\tiivistelma{%
  Tämä kirjoitelma on esimerkki siitä, kuinka
  {gradu3}-tutkielmapohjaa käytetään.  Se sisältää myös
  käyttöohjeet ja tutkielman rakennetta koskevia ohjeita.

  Tutkielman tiivistelmä on tyypillisesti lyhyt esitys, jossa
  kerrotaan tutkielman taustoista, tavoitteesta, tutkimusmenetelmistä,
  saavutetuista tuloksista, tulosten tulkinnasta ja johtopäätöksistä.
  Tiivistelmän tulee olla niin lyhyt, että se, englanninkielinen
  abstrakti ja muut metatiedot mahtuvat kaikki samalle sivulle.

  Sen tulee kertoa täsmälleen samat asiat kuin englannikielinen
  abstrakti.
}
\abstract{%
  This document is a sample {gradu3} thesis document class
  document.  It also functions as a user manual and supplies
  guidelines for structuring a thesis document.

  The abstact is typically short and discusses the background, the
  aims, the research methods, the obtained results, the interpretation
  of the results and the conculsions of the thesis.  It should be so
  short that it, the Finnish translation, and all other meta
  information fit on the same page.

  The Finnish tiivistelmä of a thesis should usually say exactly the same
  things as the abstract.
}

\author{Aleksi Pekkala}
\contactinformation{\texttt{alvianpe@student.jyu.fi}}
% use a separate \author command for each author, if there is more than one
\supervisor{Oleksiy Khriyenko}
% use a separate \supervisor command for each supervisor, if there
% is more than one

\maketitle

% \begin{thetermlist}
% \item[FaaS] Function as a Service.
% % \item[\LaTeX] A system, built on top of \TeX\
% %   \parencite{knuth86:_texbook}, for typesetting structured
% %   documents \parencite[see][]{lamport94:_latex}.  Its current version
% %   is \LaTeXe.
% \end{thetermlist}

\mainmatter

\chapter{Introduction}

\begin{quote}
It is a good idea to start the Introduction with the main thesis statement or research question of the thesis.  After that, it is a good idea to clarify things by defining any necessary terms. Definitions after the thesis statement!  Also, don't babble in the introduction. The introduction is also a good place to discuss why your thesis statement is scientifically or practically relevant and interesting.  Ideally, it would be relevant and interesting from both the scientific and the practical point of view. It would also be excellent if you explained, in the introduction, what your contribution is; that is, what such knowledge your thesis contains that you have investigated personally instead of reading it from somewhere. The contribution could well be, that you have personally checked the truth of a claim you found in a book or article.  At the end of the Introduction, it is customary to briefly explain the structure of the thesis -- what each chapter is about.
\end{quote}

Serverless is defined as a cloud-native platform for short-running, stateless computation and event-driven applications which scales up and down instantly and automatically and charges for actual usage at a millisecond granularity. Unlike SaaS or PaaS that are always running, but scale on-demand, serverless workloads run on-demand, and consequently, scale on-demand.

\textcite{buyya2017manifesto} go as far as to describe cloud computing as the backbone of modern economy.

\textcite{jamshidi13cloudmigrationreview} identify cost saving, scalability, and efficient utilization of resources as well as flexibility as key drivers to migrate application to the cloud.

Particular importance in the current energy-constrained environment. Data centers use on the order of 1-2\% of global energy consumption, but server utilization rates are really low. \parencite{horner16powerusage}

In a nutshell: serverless computing is a relatively new form of cloud computing that enables efficient resource utilization and elasticity, thus bringing about potential savings in hosting costs and increases in developer productivity \parencite{robert2016serverlessarchitectures}. As a rather new development there's a lack of research in serverless computing. Multiple authors, e.g. \textcite{baldini17currentTrends}, \textcite{fox17} and \textcite{van2017spec} note the identification of FaaS-specific patterns (composing functions into larger systems) as an important research topic. The object of this thesis is to fill that gap by a) surveying existing patterns in literature and b) evaluate, extend and propose new patterns by migrating parts of a web application into serverless architecture.

\textcite{balalaie16migratingcloud} talk about the reasons behind migrating systems to cloud-native architectures.

\section{Research questions}

Introduce the following research questions:

1. Why should a web app be migrated to FaaS?

2. What kind of patterns are there for building serverless web application backends?

3. Do the existing patterns have gaps or missing parts, and if so, can we come up with improvements or alternative solutions?

4. How does migrating a web app to FaaS effect its quality?

\section{Outline}

The thesis is structured as follows: the second chapter serves as an introduction to the concept of serverless computing. The chapter describes the main benefits and drawbacks of the platform, as well as touching upon its internal mechanisms and briefly comparing the main service providers. Extra emphasis is placed on how the platform's limitations should be taken into account when designing web application backends.

The third chapter consists of a survey into existing serverless design patterns and recommendations. Applicability of other cloud computing, distributed computing and enterprise integration patterns is also evaluated.

The fourth chapter describes the process of migrating an existing web application to serverless architecture. The patterns discovered in the previous chapter are utilized to implemented various typical web application features on a serverless platform. In cases where existing patterns prove insufficient or unsuitable as per the target application's characteristics, modifications or new patterns are proposed. This chapter forms the exploratory or constructive part of the thesis.

The outcome of the migration process is evaluated in the fifth chapter. The potential benefits and drawbacks of the serverless platform outlined in chapter 2 are used to reflect on the final artifact. The chapter includes approximations on measurable attributes such as hosting costs and performance as well as discussion on the more subjective attributes like maintainability and developer experience.

The final chapter of the thesis aims to draw conclusions on the migration process and the resulting artifacts. The chapter contains a summary of the research outcomes and ends with recommendations for further research topics.

\chapter{Serverless computing}

\begin{quote}
The goal of the theoretical part of a thesis is to develop the theoretical background required in the thesis.  The idea is that a reader of the thesis should, based on just the thesis itself, be able to understand all the special concepts and methods used in the thesis. A good thesis also gives well-argued reasons for why exactly these concepts and methods are in use in the thesis (with the main alternatives given in the literature mentioned).
\end{quote}

\section{What is serverless?}

Definition and implications of serverless computing. Main features or tenets. Benefits, use cases, notable users?

\textcite{robert2016serverlessarchitectures} has a thorough description of the platform.  \textcite{van2017spec}, \textcite{varghese18next} and \textcite{buyya2017manifesto} provide a more historical context and future research directions. \textcite{albuquerque17faaspaas} compare FaaS to PaaS. The \textcite{cncf18serverlessWG} whitepaper describes the platform from a more industry-oriented viewpoint. Includes comparison with other cloud computing models and a detailed view on the serverless processing model.

Historical/evolutionary views: 1) on-premises infra -> grid -> IaaS -> PaaS -> serverless, 2) on-prem -> VMs -> containers -> serverless, 3) monolith -> SOA -> microservices -> serverless.

How does serverless relate to concepts such as FaaS, SOA, microservices, event-driven, virtualiation, containers, cloud-native, ...? Cloud-ready/cloud-native as defined by \textcite{pozdniakova17cloudready}.

\section{Use cases}

\textcite{malawski17executescientific} find that while serverless infrastructures are designed mainly for processing background tasks of Web and IoT applications, the simple mode of operation makes this approach easy to use and promising in scientific workflows too. \textcite{jonas17occupy} argue that a serverless execution model with stateless functions can enable radically-simpler, fundamentally elastic, and more user-friendly distributed data processing systems. \textcite{spillner18faaster} also find that in many domains of scientific and high-performance computing, solutions can be engineered based on simple functions which are executed on commercially offered or self-hosted FaaS platforms.

\textcite{glikson17devicelessedge} propose the novel paradigm of Deviceless Edge Computing that extends the serverless paradigm to the edge of the network, enabling IoT and Edge devices to be seamlessly integrated as application execution infrastructure. \textcite{nastic17analyticsedge} present a novel approach implementing cloud-supported, real-time data analytics in serverless edge-computing applications. \textcite{baresi17edgecomputing} propose a serverless architecture at the edge, bringing a highly scalable, intelligent and cost-effective use of edge infrastructure’s resources with minimal configuration and operation efforts.

\textcite{fouladi2017encoding} present a serverless video-processing framework. \textcite{yan16chatbot} present the architecture and prototype of a chatbot using a serverless platform, where developers compose stateless functions together to perform useful actions. \textcite{ishakian17neural} evaluate the suitability of a serverless computing environment for the inferencing of large neural network models. \textcite{ast17webcomponent} describe an approach of how to utilize serverless computing to enable self-contained web components by deploying Web Component business logic as cloud-hosted functions.

\section{Execution models and triggers}

Describe the two supported execution models, synchronous and asynchronous, and how they relate to application design. The former is used to build a typical request-response flow, e.g. a REST API endpoint, whereas the latter relates to pub-sub and other event-driven flows. Give examples on the kind of triggers supported by serverless platforms (HTTP calls, messaging, database events, ...).

\section{Runtime}

Briefly describe the inner workings of a FaaS runtime.

\textcite{spillner17snafu} presents the design and implementation of a research-friendly FaaS runtime. \textcite{mcgrath17implement} present the design of a novel performance-oriented serverless computing platform, discussing implementation challenges such as function scaling and container discovery, lifecycle, and reuse. \textcite{hendrickson16openlambda} present OpenLambda, an open-source platform for serverless computation, describing the key aspects of serverless computation and presenting numerous research challenges that must be addressed in the design and implementation of such systems.

\section{Service providers}

\textcite{lynn2017preliminary} provide an overview and multi-level feature analysis of seven enterprise serverless computing platforms.

\section{Economics of serverless}

\textcite{eivy2017wary} and \textcite{villamizar2016infrastructure} both focus on the economic aspects of serverless. \textcite{adzic2017serverless} explain how novel design patterns are used to significantly optimize costs -- just running traditional web apps inside Lambda containers doesn't necessarily equate to savings. \textcite{adzic2017serverless} also report savings between 66 and 95\% in two case studies, and present a handly table comparing hosting prices for intermittent service tasks. \textcite{spillner17exploiting} exploits the control plane of AWS Lambda to implement services practically for free. \textcite{leitner16modelcost} present an approach to model deployment costs of AWS Lambda applications in real-time. \textcite{kuhlenkamp17costradamus} present another cost-tracing system that enables per-request cost-tracing for cloud-based software services, noting that cost testing should not only rely on isolated tests of single services but consider comprehensive end-to-end cost traces.

\section{Security}

Address the security implications of serverless.

\section{Drawbacks and limitations}

What to take into consideration when migrating to serverless?

\textcite{lloydserverless} analyze serverless performance and elasticity, identifying the cold start phenomenon. Differences in runtimes/languages, and larger library dependencies lead to slower starts. \textcite{oakes17pipsqueak} address the problem by caching package dependencies on platform-level.

\textcite{baldini17trilemma} identify three competing constraints in serverless function composition: functions should be considered as black boxes; function composition should obey a substitution principle with respect to synchronous invocation; and invocations should not be double-billed.

\textcite{robert2016serverlessarchitectures} and \textcite{adzic2017serverless} respectively list a number of limitations, including lack of strong SLA, vendor lock-in, short life-span and immature local development tools.

\textcite{kuhlenkamp17costradamus} discover two serverless cost tradeoffs: the retry cost effect and the cost ripple effect.

The need for circuit breakers (risk of DDoSing yourself) when interacting with non-serverless components like a database. Mention novel cloud-native database services like Google's Cloud Spanner and AWS Aurora. Figure out a source for this -- \textcite{hohpe2004enterprise} might have a relevant pattern.

\chapter{Serverless design patterns}

Survey of serverless design patterns. \textcite{baldini17currentTrends} put the question as follows:

\begin{quote}
Will there be patterns for building serverless solutions? How do we combine low granularity basic building blocks of serverless into bigger solutions? How are we going to decompose apps into functions so that they optimize resource usage? For example how do we identify CPU-bound parts of applications built to run in serverless services? Can we use well-defined patterns for composing functions and external APIs? What should be done on the server vs. client (e.g., are thicker clients more appropriate here)? Are there lessons learned that can be applied from OOP design patterns, Enterprise Integration Patterns, etc.?
\end{quote}

Composing serverless functions is not like composing regular functions. All the difficulties of distributed computing -- message loss, timeouts and others -- apply and have to be handled. Possible solutions include retry policies, dead-letter queues and idempotent functions.

\section{Serverless patterns}

\textcite{sbarski2017serverless} introduce the following five patterns: Command, Messaging Priority queue, Fan-out and Pipes and filters.

\textcite{adzic2017serverless} suggest 3 methods for optimizing resource usage: use distributed authorization, let clients orchestrate workflows and allow clients to directly connect to AWS resources. The authors also discuss how paying only for actual utilization has two additional benefits of 1) removing incentives for bundling and 2) removing barriers to versioning.

\textcite{ast17webcomponent} describe self-contained web components with serverless backends.

\section{Enterprise Integration Patterns}

\textcite{hohpe2004enterprise} present a number of asynchronous messaging architectures in the seminal book on EIP. While predating the whole serverless phenomenon the patterns are still relevant. Hohpe even demonstrated implementing one of his patterns on top of Google's serverless platform \href{http://www.enterpriseintegrationpatterns.com/ramblings/google_cloud_functions.html}{in a blog post}.

\section{FaaSification}

\textcite{spillner17transformpython} describes an automated approach to transform monolithic Python code into modular FaaS units by partially automated decomposition. Doesn't really seem suitable for the web application migration process covered in this thesis but worth mentioning.

\chapter{Migration process}

Implement a subset of the target app in a serverless style, utilizing the surveyed patterns and keeping a of the tricky parts. In case the patterns prove unsuitable for the given problem, try to come up with an alternative solution.

Decide on the parts to migrate. Should demonstrate the features and limitations of serverless as outlined above.

A simple REST API endpoint to showcase API Gateway and synchronous invocation. Shouldn't require any big changes to application code.

Interaction between multiple services to demonstrate distributed transactions.

A scheduled (cron) event.

Interacting with an external SaaS service like Twilio, Auth0. Demonstrate event-driven invocation.

\chapter{Evaluation}

Evaluation the outcome of migration process. Estimate the effects on performance and hosting costs. Weigh in on maintainability, testability, developer experience etc.

\chapter{Conclusion}

\begin{quote}
The last chapter of a thesis is the Conclusion (some authors use
Conculsions, instead).  Keep it short, and discuss what one can
conclude about the thesis statement or research question given in the
Introduction, in light of all that has been written in the thesis.
The Conclusion is also the place to discuss any limitations and
weaknesses of the thesis (especially those that cast doubt on the
reliabliity of the results given in the thesis), if they have not been
already discussed, for example in a Discussion chapter.  It is also
customary to state, what further research might be beneficial in light
of this thesis.

If the Conclusion threatens to become too long, it is a good idea to
split the interpretation of the results into its own chapter, often
called Discussion, making Conclusion short and sweet.
\end{quote}

\printbibliography

\end{document}
